<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Connections : Easily add follow/like/watch/stalk capabilities to any ActiveRecord model" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Connections</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/balvig/connections">Fork Me on GitHub</a>

          <h1 id="project_title">Connections</h1>
          <h2 id="project_tagline">Easily add follow/like/watch/stalk capabilities to any ActiveRecord model</h2>

          <section id="downloads">
            <a class="zip_download_link" href="https://github.com/balvig/connections/zipball/master">Download this project as a .zip file</a>
            <a class="tar_download_link" href="https://github.com/balvig/connections/tarball/master">Download this project as a tar.gz file</a>
          </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>Connections</h1>

<p>Most social apps need some kind of follow/like/watch/stalk/etc
features that connects one model to another.</p>

<p>Instead of having to recreate this functionality for every project I
decided to create a gem that easily allows you to add these features
using any naming you prefer.</p>

<h2>Installation</h2>

<p>Add the gem to the gemfile:
<code>gem "connections"</code></p>

<p>Install migration:
<code>rake connections:install:migrations</code></p>

<p>This generates a migration that creates a single join table for
keeping track of what is connected to what.</p>

<h2>Usage</h2>

<p>Use <code>connects_with</code> to enable a model to connect to other models and
<code>connectable_with</code> to allow a model to be connected to using
whatever naming scheme you prefer (follow, like, watch, etc)</p>

<div class="highlight">
<pre><span class="k">class</span> <span class="nc">User</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span>
  <span class="n">connects_with</span> <span class="ss">:follow</span><span class="p">,</span> <span class="ss">:like</span>
  <span class="n">connectable_with</span> <span class="ss">:follow</span>
<span class="k">end</span>

<span class="k">class</span> <span class="nc">Post</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span>
  <span class="n">connectable_with</span> <span class="ss">:like</span>
<span class="k">end</span>
</pre>
</div>


<p>Depending on the naming scheme you choose Connections will try to figure out the
grammar and add appropriately named methods. For example in the case of
"Follow" and "Like" the following methods will be added:</p>

<div class="highlight">
<pre><span class="c1"># Follow</span>
<span class="n">user</span><span class="o">.</span><span class="n">follow</span><span class="p">(</span><span class="n">other_user</span><span class="p">)</span> <span class="c1"># Creates a 'Follow' connection user -&gt; other_user</span>
<span class="n">user</span><span class="o">.</span><span class="n">unfollow</span><span class="p">(</span><span class="n">other_user</span><span class="p">)</span> <span class="c1"># Removes 'Follow' connection user -&gt; other_user</span>
<span class="n">user</span><span class="o">.</span><span class="n">toggle_follow</span><span class="p">(</span><span class="n">other_user</span><span class="p">)</span> <span class="c1"># Toggles the connection on/off</span>
<span class="n">user</span><span class="o">.</span><span class="n">follows?</span><span class="p">(</span><span class="n">other_user</span><span class="p">)</span> <span class="c1"># Returns true if the user if following other_user</span>
<span class="n">user</span><span class="o">.</span><span class="n">following</span><span class="p">(</span><span class="ss">:user</span><span class="p">)</span> <span class="c1"># Returns a list of all the users the user is following</span>
<span class="n">other_user</span><span class="o">.</span><span class="n">followers</span><span class="p">(</span><span class="ss">:user</span><span class="p">)</span> <span class="c1">#Returns a list of all the user's followers</span>

<span class="c1"># Like</span>
<span class="n">user</span><span class="o">.</span><span class="n">like</span><span class="p">(</span><span class="n">post</span><span class="p">)</span>
<span class="n">user</span><span class="o">.</span><span class="n">unlike</span><span class="p">(</span><span class="n">post</span><span class="p">)</span>
<span class="n">user</span><span class="o">.</span><span class="n">toggle_like</span><span class="p">(</span><span class="n">post</span><span class="p">)</span>
<span class="n">user</span><span class="o">.</span><span class="n">likes?</span><span class="p">(</span><span class="n">post</span><span class="p">)</span>
<span class="n">user</span><span class="o">.</span><span class="n">liking</span><span class="p">(</span><span class="ss">:post</span><span class="p">)</span>
<span class="n">post</span><span class="o">.</span><span class="n">likers</span><span class="p">(</span><span class="ss">:user</span><span class="p">)</span>
</pre>
</div>


<p>That's it! If you want to add extra functionality to the join model (such
as using callbacks etc) you can explicitly define the model in your
project like this:</p>

<div class="highlight">
<pre><span class="k">class</span> <span class="nc">Follow</span> <span class="o">&lt;</span> <span class="no">Connections</span><span class="o">::</span><span class="no">Connection</span>
  <span class="o">.</span><span class="n">.</span><span class="o">.</span>
<span class="k">end</span>
</pre>
</div>

      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Connections maintained by <a href="https://github.com/balvig">balvig</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
